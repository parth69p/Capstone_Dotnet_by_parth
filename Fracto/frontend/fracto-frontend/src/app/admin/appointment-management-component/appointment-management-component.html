<div class="container my-4 appointments-container">
  <h2 class="mb-4 text-center text-primary fw-bold">üóìÔ∏è Appointments Management</h2>

  <!-- Table of appointments -->
  <div class="card border-0 shadow rounded-3 mb-4" id="print-section">
    <div class="card-body p-0">
      <div class="table-responsive" *ngIf="appointments.length > 0; else noAppointments">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-primary text-dark">
            <tr>
              <th>ID</th>
              <th>User</th>
              <th>Doctor</th>
              <th>Date</th>
              <th>Time Slot</th>
              <th>Status</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let appt of appointments">
              <td class="fw-semibold text-muted">{{ appt.id }}</td>
              <td>{{ appt.userName }}</td>
              <td class="fw-semibold text-primary">{{ appt.doctorName }}</td>
              <td>{{ appt.appointmentDate | date: 'mediumDate' }}</td>
              <td>{{ appt.timeSlot }}</td>
              <td>
                <span
                  class="badge px-3 py-2 rounded-pill shadow-sm"
                  [ngClass]="{
                    'bg-warning text-dark': appt.status === 'Pending',
                    'bg-success': appt.status === 'Confirmed',
                    'bg-danger': appt.status === 'Cancelled'
                  }">
                  {{ appt.status }}
                </span>
              </td>
              <td class="text-center">
                <button
                  class="btn btn-sm btn-outline-danger rounded-pill px-3 me-2"
                  (click)="cancelAppointment(appt.id)"
                  [disabled]="appt.status === 'Cancelled'">
                   Cancel
                </button>
                <button
                  class="btn btn-sm btn-outline-primary rounded-pill px-3"
                  (click)="openUpdateForm(appt)">
                   Update
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Message if no appointments -->
      <ng-template #noAppointments>
        <p class="text-center text-muted py-4">No appointments found.</p>
      </ng-template>
    </div>
  </div>

  <!-- Update form stays outside so it won't be printed -->
  <div *ngIf="selectedAppointment" class="card border-0 shadow p-4 rounded-3 mb-4">
    ...
  </div>

  <!-- Print Button at End -->
  <div class="text-end mt-3">
    <button 
      class="btn btn-gradient rounded-pill px-4 py-2 shadow-sm d-inline-flex align-items-center gap-2" 
      (click)="printAppointments()">
      <i class="bi bi-printer-fill"></i> Print Appointments
    </button>
  </div>
</div>
