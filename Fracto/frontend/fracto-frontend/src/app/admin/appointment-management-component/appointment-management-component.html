<div class="container my-4 appointments-container">
  <h2 class="mb-4 text-center">Appointments Management</h2>
  <!-- Update form -->
  <div *ngIf="selectedAppointment" class="card mt-4 p-4 shadow-sm update-form">
    <h3 class="mb-3">Update Appointment (ID: {{ selectedAppointment.id }})</h3>

    <form (ngSubmit)="submitUpdate()" class="row g-3">
      <div class="col-md-4">
        <label class="form-label">Date:</label>
        <input
          type="date"
          [(ngModel)]="selectedAppointment.appointmentDate"
          name="appointmentDate"
          class="form-control"
          required
        />
      </div>

      <div class="col-md-4">
        <label class="form-label">Time Slot:</label>
        <input
          type="text"
          [(ngModel)]="selectedAppointment.timeSlot"
          name="timeSlot"
          class="form-control"
          required
        />
      </div>

      <div class="col-md-4">
        <label class="form-label">Status:</label>
        <select [(ngModel)]="selectedAppointment.status" name="status" class="form-select">
          <option value="Pending">Pending</option>
          <option value="Confirmed">Confirmed</option>
          <option value="Cancelled">Cancelled</option>
        </select>
      </div>

      <div class="col-12 mt-3 d-flex gap-2">
        <button type="submit" class="btn btn-success">Save</button>
        <button type="button" class="btn btn-secondary" (click)="selectedAppointment = null">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>

  <!-- Table of appointments -->
  <div class="table-responsive" *ngIf="appointments.length > 0; else noAppointments">
    <table class="table table-striped table-hover align-middle appointments-table">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>User</th>
          <th>Doctor</th>
          <th>Date</th>
          <th>Time Slot</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let appt of appointments">
          <td>{{ appt.id }}</td>
          <td>{{ appt.userName }}</td>
          <td>{{ appt.doctorName }}</td>
          <td>{{ appt.appointmentDate | date:'shortDate' }}</td>
          <td>{{ appt.timeSlot }}</td>
          <td>
            <span 
              class="badge" 
              [ngClass]="{
                'bg-warning text-dark': appt.status === 'Pending',
                'bg-success': appt.status === 'Confirmed',
                'bg-danger': appt.status === 'Cancelled'
              }">
              {{ appt.status }}
            </span>
          </td>
          <td>
            <button class="btn btn-sm btn-danger me-2" 
                    (click)="cancelAppointment(appt.id)" 
                    [disabled]="appt.status === 'Cancelled'">
              Cancel
            </button>
            <button class="btn btn-sm btn-primary" (click)="openUpdateForm(appt)">
              Update
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Message if no appointments -->
  <ng-template #noAppointments>
    <p class="text-center text-muted">No appointments found.</p>
  </ng-template>

